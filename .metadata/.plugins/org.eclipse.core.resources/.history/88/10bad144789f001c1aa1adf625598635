/*****************************************************************************/
/*****************************************************************************/
/* Title                 :   UART_Priv                                       */
/* Filename              :   UART_Priv.h                                     */
/* Author                :   Shaban Abdullah Awad                            */
/* Created on            :   Feb 27, 2022                                    */
/* Version               :   1.0.0                                           */
/* Toolchain             :   avr-gcc (4.3.3)                                 */
/* Target                :   ATmega32                                        */
/* Notes                 :   None                                            */
/*                                                                           */
/*****************************************************************************/


/*****************************************************************************/
/****************************   FILE GUARDE  *********************************/
#ifndef UART_PRIV_H_
#define UART_PRIV_H_


/****************************************************************************
* Enumeration to configure Multiprocessor Communication Mode in USART Using *
* the Bit0–MPCM in UCSRA Register.                                          *
****************************************************************************/
typedef enum
{

	USART_SingleProcessor ,
	USART_MultiProcessor  ,

}USART_CommunicationTerminal;


/****************************************************************************
* Enumeration to configure USART Trans. Speed for either Normal or Double   *
* Speed mode using the Bit1–U2X: in UCSRA Register.                         *
****************************************************************************/
typedef enum
{

	USART_Async_NormalSpeed  ,
	USART_Async_DoubleSpeed  ,
	USART_Sync_Master        ,
	USART_Sync_Slave         ,

}USART_CommunicationMode;


/****************************************************************************
* Enumeration to configure USART as Transmitter, Receiver or Transceiver    *
* by manipulating in RXEN and TXEN in UCSRB Register.                       *
****************************************************************************/
typedef enum
{

	USART_Disable ,
	USART_Tx_Only ,
	USART_Rx_Only ,
	USART_Tx_Rx   ,

}USART_EnableMode;


/****************************************************************************
* Enumeration Covers all USART Interrupt possible.                          *
****************************************************************************/
typedef enum
{
	USART_InterruptDisable                    ,
	USART_RxCompletEnable                     ,
	USART_TxCompletEnable                     ,
	USART_UDR_EmptyEnable                     ,
	USART_RxComplet_TxComplet_Enable          ,
	USART_RxComplet_UDR_Enable                ,
	USART_TxComplet_UDR_Enable                ,
	USART_TxComplet_RxComplet_UDR_EmptyEnable ,

}USART_InterruptSource;



/****************************************************************************
* USART Character Size possibilities per Frame.                             *
*****************************************************************************/
typedef enum
{
	USART_5bitData              ,
	USART_6bitData              ,
	USART_7bitData              ,
	USART_8bitData              ,
	USART_9bitData              ,

}USART_DataFrame;


/****************************************************************************
* USART Character Size possibilities per Frame.                             *
*****************************************************************************/
typedef enum
{
	USART_             ,
	USART_             ,
	USART_             ,
	USART_             ,
	USART_             ,

}USART_;





/*****************************************************************************/
/**************************** PRIVATE MACROS *********************************/
#define NORMAL           2U
#define DOUBLE           1U


#define ENABLE_MPCM      0
#define DISABLE_MPCM     1


#define TRANSMITTER      0
#define RECEIVER         1
#define TRANSCEIVER      2


#define CHAR_SIZE_5      0
#define CHAR_SIZE_6      1
#define CHAR_SIZE_7      2
#define CHAR_SIZE_8      3


/****************************************************************************/
/* UART REGISTERS DEFINITION.                                               */
/****************************************************************************/
#define   UDR           (*((volatile u8* const)0x2C))

#define   UCSRA         (*((volatile u8* const)0x2B))

#define   UCSRB         (*((volatile u8* const)0x2A))

//Hint: The UCSRC and UBRRH Registers share the same Address.
#define   UCSRC         (*((volatile u8* const)0x40))
#define   UBRRH         (*((volatile u8* const)0x40))

#define   UBRRL         (*((volatile u8* const)0x29))



// UCSRA Bits Definition.
#define   RXC                 7
#define   TXC                 6
#define   UDRE                5
#define   FE                  4
#define   DOR                 3
#define   PE                  2
#define   U2X                 1
#define   MPCM                0

// UCSRB Bits Definition.
#define   RXCIE               7
#define   TXCIE               6
#define   UDRIE               5
#define   RXEN                4
#define   TXEN                3
#define   UCSZ2               2
#define   RXB8                1
#define   TXB8                0


//UBRRH Bits Definition.
#define   URSEL              7


//UCSRC Bits Definition.
#define   URSEL              7
#define   UMSEL              6
#define   UPM1               5
#define   UPM0               4
#define   USBS               3
#define   UCSZ1              2
#define   UCSZ0              1
#define   UCPOL              0


#define UART_MSK_BIT         1



#define MY_UBRRL             ((F_CPU/(8*UART_SPEED_MODE)/BUAD_VAL-1)&0xFF)
#define MY_UBRRH             (((F_CPU/(8*UART_SPEED_MODE)/BUAD_VAL-1)>>8)&0x0F)


#define UART_TX_START()      UCSRB  |=(UART_MSK_BIT<<TXEN)
#define UART_TX_STOP()       UCSRB &=~(UART_MSK_BIT<<TXEN)

#define UART_RX_START()      UCSRB  |=(UART_MSK_BIT<<RXEN)
#define UART_RX_STOP()       UCSRB &=~(UART_MSK_BIT<<RXEN)


#endif /* UART_PRIV_H_ */
/***************************** END OF FILE. *********************************/
/****************************************************************************/

